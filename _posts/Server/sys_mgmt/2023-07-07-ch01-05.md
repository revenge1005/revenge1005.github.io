---
title:  "[ì‹œìŠ¤í…œ ê´€ë¦¬] 05. ë¡œê·¸ ê´€ë¦¬ - logwatch" 

categories:
  - SYS_MGMT
tags:
  - [sys_mgmt, linux]

toc: true
toc_sticky: true

date: 2023-07-07
last_modified_at: 2023-07-07
---
<br>

# ğŸ”” ë¡œê·¸ ë¡œí…Œì´ì…˜ - logwatch
---

<style>
table {
    font-size: 12pt;
}
table th:first-of-type {
    width: 5%;
}
table th:nth-of-type(2) {
    width: 20%;
}
table th:nth-of-type(3) {
    width: 50%;
}
table th:nth-of-type(4) {
    width: 30%;
} 
big { 
    font-size: 25px 
}
small { 
    font-size: 18px 
}
</style>

> logwatch ëŠ” Linux ìš© **ì‹œìŠ¤í…œ ë¡œê·¸ ëª¨ë‹ˆí„°ë§ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì‹œìŠ¤í…œ ë¡œê·¸ì¤‘ ì¤‘ìš”í•˜ë‹¤ê³  íŒë‹¨ë˜ëŠ” ë‚´ìš©ë§Œì„ ë½‘ì•„ì„œ ê²°ê³¼ë¥¼ ì •ê¸°ì ìœ¼ë¡œ root ì—ê²Œ email ë¡œ ì „ì†¡í•´ ì£¼ëŠ” ì—­í• ì„ ìˆ˜í–‰**í•œë‹¤.

<br>

<big> **â–  logwatch ì„¤ì¹˜** </big> <br>

```bash
# CentOS (RHEL ê³„ì—´)
yum -y install logwatch
```

```bash
# Ubuntu (Debian ê³„ì—´)
apt -y install logwatch
```

<br>

<big> **â–  logwatch - nginx ì„¤ì •** </big> <br>

> nginxì˜ ë¡œê·¸ ì •ë³´ëŠ” httpì™€ ê±°ì˜ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— httpìš© ì„¤ì • íŒŒì¼ì„ ë³µì‚¬í•œ ë‹¤ìŒ í¸ì§‘í•´ì„œ ì„¤ì •íŒŒì¼ë¡œ ì‘ì„±í•œë‹¤.

```bash
{
    cp /usr/share/logwatch/default.conf/services/http.conf /etc/logwatch/conf/services/nginx.conf
    cp /usr/share/logwatch/scripts/services/http /etc/logwatch/scripts/services/nginx
    cp /usr/share/logwatch/default.conf/logfiles/http.conf /etc/logwatch/conf/logfiles/nginx.conf
}
```

```bash
# /etc/logwatch/conf/services/nginx.conf íŒŒì¼ ë‚´ìš© ë³€ê²½

Title = "nginx"
# Which logfile group...
LogFile = nginx
```

```bash
# /etc/logwatch/conf/logfiles/nginx.conf íŒŒì¼ ë‚´ìš© ë³€ê²½

~(ìƒëµ)~
# What actual file?  Defaults to LogPath if not absolute path....
#LogFile = httpd/*access_log
#LogFile = apache/*access.log.1
#LogFile = apache/*access.log
#LogFile = apache2/*access.log.1
#LogFile = apache2/*access.log
#LogFile = apache2/*access_log
#LogFile = apache-ssl/*access.log.1
#LogFile = apache-ssl/*access.log
#LogFile = nginx/*access.log
#LogFile = nginx/*access.log.1
LogFile = /var/log/nginx/*access.log
LogFile = /var/log/nginx/*access.log.1


# If the archives are searched, here is one or more line
# (optionally containing wildcards) that tell where they are...
#If you use a "-" in naming add that as well -mgt
#Archive = archiv/httpd/*access_log.*
#Archive = httpd/*access_log.*
#Archive = apache/*access.log.*.gz
#Archive = apache2/*access.log.*.gz
#Archive = apache2/*access_log.*.gz
#Archive = apache-ssl/*access.log.*.gz
#Archive = archiv/httpd/*access_log-*
#Archive = httpd/*access_log-*
#Archive = apache/*access.log-*.gz
#Archive = apache2/*access.log-*.gz
#Archive = apache2/*access_log-*.gz
#Archive = apache-ssl/*access.log-*.gz
#Archive = nginx/*access.log.*.gz
Archive = /var/log/nginx/*access.log.*.gz

# Expand the repeats (actually just removes them now)
*ExpandRepeats


# Keep only the lines in the proper date range...
*ApplyhttpDate

# vi: shiftwidth=3 tabstop=3 et
```

| ì„¤ì • | ë‚´ìš© |
| :-----: | :------- |
| LogFile | ê°ì‹œí•  ë¡œê·¸ íŒŒì¼ëª…ì„ ì§€ì • |
| Archive | ì•„ì¹´ì´ë¸Œë¡œ ì²˜ë¦¬ëœ ë¡œê·¸ íŒŒì¼ëª…ì„ ì§€ì • (ë¡œì¼€ì´ì…˜ëœ íŒŒì¼ëª…) |

<br>

<big> **â–  logwatch - nginx í…ŒìŠ¤íŠ¸** </big> <br>

```bash
$ logwatch --service nginx --range all

 ################### Logwatch 7.4.3 (04/27/16) ####################
        Processing Initiated: Sun Jul 30 20:11:32 2023
        Date Range Processed: all
        Detail Level of Output: 0
        Type of Output/Format: stdout / text
        Logfiles for Host: dlp.test.srv
 ##################################################################

 --------------------- nginx Begin ------------------------

 Requests with error response codes
    403 Forbidden
       /test/: 2 Time(s)
    404 Not Found
       /test/: 5 Time(s)
       /test/nginx-logo.png: 5 Time(s)
       /test/poweredby.png: 5 Time(s)
       /test212121: 1 Time(s)

 ---------------------- nginx End -------------------------


 ###################### Logwatch End #########################
```

| ì„¤ì • | ë‚´ìš© |
| :-----: | :------- |
| --service | ì„œë¹„ìŠ¤ëª… ì§€ì • |
| --ragne | ë¡œê·¸ì˜ ë¶„ì„ ë²”ìœ„ë¥¼ ì§€ì • |

<br>

<big> **â–  logwatch - cron ì„¤ì •** </big> <br>

> logwatchì˜ cron ì„¤ì •ì€ ì„¤ì¹˜í•  ë•Œ **/etc/cron.daily/0logwatchë¼ëŠ” Shell ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ë¡œ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©°, ë§¤ì¼ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ë³„ë„ë¡œ cron ì„¤ì •ì„ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.** <br><br> logwatchì˜ ë¦¬í¬íŠ¸ë¥¼ í™•ì¸í•´ ë³´ë©´ ì™„ë²½í•˜ì§€ëŠ” ì•Šì§€ë§Œ í•´ë‹¹ ë¦¬í¬íŠ¸ì— ìˆëŠ” ì‘ì€ ì§•í›„ë¥¼ ë†“ì¹˜ì§€ ì•Šìœ¼ë ¤ê³  ë…¸ë ¥í•˜ë©´ ë¬¸ì œë¥¼ ì¡°ê¸°ì— ê²€ì¶œí•  ìˆ˜ ìˆë‹¤.