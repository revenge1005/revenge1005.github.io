---
title:  "[Ansible] 05-2. ì¸ë²¤í† ë¦¬ íŒŒì¼ ì‘ì„± ë°©ë²•"

categories:
  - ANSIBLE
tags:
  - [ansible]

toc: true
toc_sticky: true

date: 2022-03-17
last_modified_at: 2022-03-17
---
# [Ansible] 05-2. ì¸ë²¤í† ë¦¬ íŒŒì¼ ì‘ì„± ë°©ë²•
---

<style>
table {
    font-size: 12pt;
}
table th:first-of-type {
    width: 5%;
}
table th:nth-of-type(2) {
    width: 15%;
}
table th:nth-of-type(3) {
    width: 50%;
}
table th:nth-of-type(4) {
    width: 30%;
}
</style>

## ğŸ”” ìì„¸í•œ ëª¨ë“ˆ ë‚´ìš©ì€ ì•„ë˜ ë¬¸ì„œë¥¼ ì°¸ê³ 

> **ëª¨ë“ˆ ë‚´ìš© :** <https://docs.ansible.com/ansible/latest/collections/ansible/builtin/index.html#modules><br><br>
**ì˜ˆì œ Github :** <https://github.com/revenge1005/Ansible_study>

<br>

## ğŸ”” ì¸ë²¤í† ë¦¬ ë‚´ìš© í™•ì¸ ëª…ë ¹ì–´

```bash
$ ansible-inventory --list 
```

<br>

## ğŸ“œ ì¸ë²¤í† ë¦¬ íŒŒì¼ ì‘ì„± ë°©ë²•

```bash
[app] # (1)
app1 ansible_host=some.app.host
app2 ansible_host=another.app.host

[db]
db1 ansible_host=db.1.host
db2 ansible_host=db.2.host

[app:vars] # (2)
admin_username=app_user
admin_uid=1001
admin_has_data=False # (3)

[db:vars]
admin_username=app_user
admin_uid=1002
admin_has_data=True

[korea] # (4)
app1

[usa] # 
```

|êµ¬ë¶„|ì„¤ëª…|
|:---:|---|
|(1)|[..]ìœ¼ë¡œ êµ¬ì„±ëœ ë¶€ë¶„ì„ ì„¹ì…˜ì´ë¼ í•˜ë©°,  [ê·¸ë£¹ ëª…] í˜•ì‹ìœ¼ë¡œ ì§€ì •í•´ í˜¸ìŠ¤íŠ¸ë¥¼ íŠ¹ì • ê·¸ë£¹ì— í• ë‹¹|
|(2)|[<ê·¸ë£¹ ì´ë¦„>:vars] í˜•ì‹ìœ¼ë¡œ ê·¸ë£¹ ë³€ìˆ˜ ì „ìš© ì„¹ì…˜ ì‚¬ìš© ê°€ëŠ¥|
|(3)|Boolean ê°’ì€ True í˜¹ì€ False ì™€ ê°™ì´ ëŒ€ë¬¸ìë¡œ ì‹œì‘í•´ì•¼ í•¨|
|(4)|í˜¸ìŠ¤íŠ¸ë¥¼ ì—¬ëŸ¬ ê·¸ë£¹ì— í• ë‹¹|

<br>

## ğŸ“œ ì¸ë²¤í† ë¦¬ ë³€ìˆ˜ë¥¼ YAML íŒŒì¼ì— ì •ì˜

- ì¸ë²¤í† ë¦¬ ë³€ìˆ˜ëŠ” ì „ìš© YAML íŒŒì¼ì— ì •ì˜ ê°€ëŠ¥í•˜ë©°, ì •í•œ ë³€ìˆ˜ë¥¼ ì •ì˜í•˜ëŠ” íŒŒì¼ ê·œì¹™ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

    - í˜¸ìŠ¤íŠ¸ ë³€ìˆ˜ë¥¼ ì •ì˜í•˜ëŠ” íŒŒì¼ì€ host_vars/<í˜¸ìŠ¤íŠ¸ ì´ë¦„>.YAML

    - ê·¸ë£¹ ë³€ìˆ˜ë¥¼ ì •ì˜í•˜ëŠ” íŒŒì¼ì€ group_vars/<ê·¸ë£¹ ì´ë¦„>.YAML

- ì¸ë²¤í† ë¦¬ ë³€ìˆ˜ ìš°ì„ ìˆœìœ„

    - (A) í”Œë ˆì´ë¶ì— ìˆëŠ” ë³€ìˆ˜ë¥¼ ì •ì˜í•œ YAML íŒŒì¼

    - (B) ì¸ë²¤í† ë¦¬ì— ìˆëŠ” ë³€ìˆ˜ë¥¼ ì •ì˜í•œ YAML íŒŒì¼

    - (C)ì¸ë²¤í† ë¦¬ íŒŒì¼ì—ì„œ ì •ì˜í•œ ë³€ìˆ˜ 

```bash
./
â”œâ”€â”€ hosts
â”œâ”€â”€ group_vars
â”‚   â”œâ”€â”€ app.yml
â”‚   â””â”€â”€ db.yml
â””â”€â”€ host_vars
    â”œâ”€â”€ app1.yml
    â””â”€â”€ app2.yml
```

```bash
$  cat group_vars/db.yml
---
admin_username: app_user
admin_uid: 1002
admin_has_data: True
# admin_has_data: TRUE
# admin_has_data: true
# admin_has_data: yes
```

```bash
$ host_vars/app1.yml
---
ansible_host: some.app.host
```

<br>

## ğŸ“œ ê¸°ë³¸ê°’ì„ ì •ì˜í•˜ëŠ” ê·¸ë£¹ ë³€ìˆ˜ íŒŒì¼

- allì´ë¼ëŠ” ì´ë¦„ì€ "ì¸í…í† ë¦¬ ë‚´ì˜ ëª¨ë“  í˜¸ìŠ¤íŠ¸ê°€ í• ë‹¹ëœ íŠ¹ë³„í•œ ê·¸ë£¹ ì´ë¦„"

    - ê¸°ë³¸ê°’ì„ ì„¤ì •í•  ë•Œ ìš©ì´

    - group_vars/all.yml ê³¼ ê°™ì´ ì‚¬ìš© ê°€ëŠ¥

- ìš°ì„ ìˆœìœ„ê°€ ê°€ì¥ ë‚®ê²Œ ì„¤ì •

    - all ê·¸ë£¹ ë³€ìˆ˜ < ë‹¤ë¥¸ ê·¸ë£¹ ë³€ìˆ˜ < í˜¸ìŠ¤íŠ¸ ë³€ìˆ˜

<br>

## ğŸ“œ ê·¸ë£¹ì˜ ê·¸ë£¹

- :children ì ‘ë¯¸ì‚¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê·¸ë£¹ì˜ í•˜ìœ„ ê·¸ë£¹ì„ ë§Œë“œëŠ”ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.

- ë˜í•œ ì´ë ‡ê²Œ ì •ì˜í•œ ê·¸ë£¹ì— :varsë¥¼ ì´ìš©í•˜ì—¬ ë³€ìˆ˜ë¥¼ ì§€ì •í•´ì£¼ëŠ”ê²ƒ ì—­ì‹œ ê°€ëŠ¥í•˜ë‹¤.

```bash
[atlanta]
host1
host2

[raleigh]
host2
host3

[southeast:children]
atlanta
raleigh

[southeast:vars]
some_server=foo.southeast.example.com
halon_system_timeout=30
self_destruct_countdown=60
escape_pods=2

[usa:children]
southeast
northeast
southwest
northwest
```

<br>