---
title:  "[Retry, k8s] 17. ì„œë¹„ìŠ¤ API - ExternalName" 

categories:
  - KUBERNETES
tags:
  - [kubernetes]

toc: true
toc_sticky: true

date: 2023-03-01
last_modified_at: 2023-03-01
---
# [Retry, k8s] 17. ì„œë¹„ìŠ¤ API - ExternalName
---

<style>
table {
    font-size: 12pt;
}
table th:first-of-type {
    width: 5%;
}
table th:nth-of-type(2) {
    width: 15%;
}
table th:nth-of-type(3) {
    width: 50%;
}
table th:nth-of-type(4) {
    width: 30%;
}
</style>

<br>

## ğŸ”” ExternalName

> ì´ ì„œë¹„ìŠ¤ëŠ” ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•˜ê¸° ìœ„í•œ ê²ƒì´ ì•„ë‹ˆë¼, **ë‚´ë¶€ íŒŒë“œê°€ ì™¸ë¶€ì˜ íŠ¹ì • FQDNì— ì‰½ê²Œ ì ‘ê·¼í•˜ê¸° ìœ„í•œ ì„œë¹„ìŠ¤**

+ ì´ ì„œë¹„ìŠ¤ëŠ” ì™¸ë¶€ì˜ íŠ¹ì • FQDNì— ëŒ€í•œ CNAME (ì„œë¹„ìŠ¤ì˜ FQDN)ì„ ì œê³µí•¨ìœ¼ë¡œì¨ í•´ë‹¹ CNAMEì„ ì´ìš©í•˜ì—¬ ì‰½ê²Œ í†µì‹ í•  ìˆ˜ ìˆë‹¤.

![2121211](https://user-images.githubusercontent.com/42735894/229359398-e666594e-426c-4002-bf11-db6028e9ba76.png){: width="90%" height="90%"}{: .align-center}

<br>

### ğŸ“œ ExternalName ì„œë¹„ìŠ¤ ìƒì„±

```bash
cat <<EOF > sample-externalname.yaml
apiVersion: v1
kind: Service
metadata:
  name: sample-externalname
  namespace: default
spec:
  type: ExternalName
  externalName: external.example.com
EOF
```

```bash
$ kubectl get service
NAME                  TYPE           CLUSTER-IP   EXTERNAL-IP            PORT(S)   AGE
sample-externalname   ExternalName   <none>       external.example.com   <none>    9s

# ì¼ì‹œì ìœ¼ë¡œ íŒŒë“œë¥¼ ê¸°ë™í•˜ì—¬ ExternalNameì˜ CNAME ì´ë¦„ í•´ì„ì„ í™•ì¸
$ kubectl run --image=amsy810/tools:v2.0 --restart=Never --rm -i testpod \
> --command -- dig sample-externalname.default.svc.cluster.local CNAME

(ìƒëµ)

;; ANSWER SECTION:
sample-externalname.default.svc.cluster.local. 30 IN CNAME external.example.com.
```

<br>

### ğŸ“œ ì™¸ë¶€ ì„œë¹„ìŠ¤ì™€ ëŠìŠ¨í•œ ê²°í•© í™•ë³´

> í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œëŠ” íŒŒë“œì™€ í†µì‹ ì— ì„œë¹„ìŠ¤ ì´ë¦„ í•´ì„ì„ ì‚¬ìš©í•˜ì—¬ ëŠìŠ¨í•œ ê²°í•©(loose coupling)ì„ ìœ ì§€í•˜ê³  ìˆìœ¼ë©°, SaaSë‚˜ IaaS ë“± ì™¸ë¶€ì— ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ë•Œë„ ê°€ëŠ¥í•œ ëŠìŠ¨í•œ ê²°í•©ìœ¼ë¡œ êµ¬ì„±í•´ì•¼ í•œë‹¤.

+ ì˜ˆë¥¼ ë“¤ì–´, ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì™¸ë¶€ì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë“±ë¡í•´ ë‘ë©´ ëª©ì ì§€ê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸¡ì˜ ì„¤ì •ì´ í•„ìš”í•˜ì§€ë§Œ ExternalNameì„ ì‚¬ìš©í•˜ë©´ ëª©ì ì§€ê°€ ë³€ê²½ë˜ì–´ë„ ExternalName ì„œë¹„ìŠ¤ë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ê°€ëŠ¥í•˜ë‹¤.

+ ëª©ì ì§€ ë³€ê²½ì— ëŒ€í•œ ëŒ€ì‘ì„ ì¿ ë²„ë„¤í‹°ìŠ¤ ë‚´ë¶€ì—ì„œ ëë‚¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì™¸ë¶€ ì„œë¹„ìŠ¤ì™€ ëŠìŠ¨í•œ ê²°í•©ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.

![sss](https://user-images.githubusercontent.com/42735894/229361777-02316f32-d395-49fc-8081-06f76fba7398.png){: width="90%" height="90%"}{: .align-center}

<br>

### ğŸ“œ ì™¸ë¶€ ì„œë¹„ìŠ¤ì™€ ë‚´ë¶€ ì„œë¹„ìŠ¤ ê°„ì˜ ì „í™˜

> ExternalNameì„ ì‚¬ìš©í•˜ë©´ ì™¸ë¶€ ì„œë¹„ìŠ¤ì™€ì˜ ëŠìŠ¨í•œ ê²°í•©ì„ í™•ë³´í•˜ê³ , ì™¸ë¶€ ì„œë¹„ìŠ¤ì™€ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ë°°í¬ëœ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ ì„œë¹„ìŠ¤ì™€ì˜ ì „í™˜ë„ ìœ ì—°í•˜ê²Œ í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

+ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸¡ì€ ì„œë¹„ìŠ¤ì˜ FQDN(store.default.svc.cluster.local)ì„ ì§€ì •í•´ ë‘ê³  ì´ë¦„ í•´ì„ì´ ë˜ë©´ ExternalNamedml CNAME ë ˆì½”ë“œ ë˜ëŠ” ClusterIPì˜ A ë ˆì½”ë“œê°€ ë°˜í™˜ë˜ëŠ” í˜•íƒœê°€ ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸¡ì€ ë³€ê²½ ì—†ì´ ë‚´ë¶€ ì„œë¹„ìŠ¤ì™€ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ ì „í™˜í•  ìˆ˜ ìˆë‹¤.

+ ì£¼ì˜í•  ì ì€ ClusterIP ì„œë¹„ìŠ¤ì—ì„œ ExternalName ì„œë¹„ìŠ¤ë¡œ ì „í™˜í•  ê²¨ìš° spec.clusterIPë¥¼ ëª…ì‹œì ìœ¼ë¡œ ê³µë€ìœ¼ë¡œ ë§Œë“¤ì–´ ë‘ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.

![31312321](https://user-images.githubusercontent.com/42735894/229363280-4e4e13b3-3473-4541-878f-8a791ab1613b.png){: width="90%" height="90%"}{: .align-center}

<br>
