---
title:  "[Rocky] 02. SSH 서버 - (2)" 

categories:
  - ROCKY
tags:
  - [rocky, linux]

toc: true
toc_sticky: true

date: 2022-08-10
last_modified_at: 2022-08-10
---
<br>

# 🔔 SFTP 전용 + Chroot
---

<style>
table {
    font-size: 12pt;
}
table th:first-of-type {
    width: 5%;
}
table th:nth-of-type(2) {
    width: 15%;
}
table th:nth-of-type(3) {
    width: 50%;
}
table th:nth-of-type(4) {
    width: 30%;
}
big {
    font-size: 15pt;
}
</style>

<br>

<big> **■ 예를 들어 [/home]을 Chroot 디렉터리로 설정** </big>

```bash
# SFTP 전용 그룹 만들기
$ groupadd sftp_users

$ vi /etc/proxy/proxy_config

# line 138 : 코멘트 아웃 후 라인 추가
#Subsystem      sftp    /usr/libexec/openssh/sftp-server
Subsystem       sftp    internal-sftp

Match Group sftp_users
  X11Forwarding no
  AllowTcpForwarding no
  ChrootDirectory /home
  ForceCommand internal-sftp

$ systemctl restart sshd

# [test] 사용자를 SFTP 전용 사용자로 설정
$ usermod -aG sftp_users rocky
```

<br>

<big> **■ 사용자 설정 SFTP 전용 설정으로 작업하는지 확인** </big>

```bash

```