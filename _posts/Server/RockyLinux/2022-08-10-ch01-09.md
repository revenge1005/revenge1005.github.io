---
title:  "[Rocky] 09. DNS - ë³´ì¡° ì„œë²„ êµ¬ì„±" 

categories:
  - ROCKY
tags:
  - [rocky, linux]

toc: true
toc_sticky: true

date: 2022-08-10
last_modified_at: 2022-08-10
---
<br>

# ğŸ”” DNS ë³´ì¡° ì„œë²„ë¥¼ êµ¬ì„±
---

<style>
table {
    font-size: 12pt;
}
table th:first-of-type {
    width: 5%;
}
table th:nth-of-type(2) {
    width: 15%;
}
table th:nth-of-type(3) {
    width: 50%;
}
table th:nth-of-type(4) {
    width: 30%;
}
big {
    font-size: 15pt;
}
</style>

<br>

<big> **â–  DNS ë§ˆìŠ¤í„° ì„œë²„ í˜¸ìŠ¤íŠ¸ì—ì„œ êµ¬ì„±** </big>

```bash

$ vi /etc/named.conf

....
....

options {
        listen-on port 53 { any; };
        listen-on-v6 { any; };
        directory       "/var/named";
        dump-file       "/var/named/data/cache_dump.db";
        statistics-file "/var/named/data/named_stats.txt";
        memstatistics-file "/var/named/data/named_mem_stats.txt";
        secroots-file   "/var/named/data/named.secroots";
        recursing-file  "/var/named/data/named.recursing";
        allow-query     { localhost; internal-network; };
        # ì˜ì—­ íŒŒì¼ì„ ì „ì†¡í•  ìˆ˜ ìˆë„ë¡ ë³´ì¡° ì„œë²„ ì¶”ê°€
        allow-transfer  { localhost; 192.168.100.85; };

....
....
```

```bash
$ vi /var/named/test.srv.wan
$TTL 86400
@   IN  SOA     ns1.test.srv. root.test.srv. (
        # update serial if update zone file
        2021072303  ;Serial
        3600        ;Refresh
        1800        ;Retry
        604800      ;Expire
        86400       ;Minimum TTL
)
        IN  NS      ns1.test.srv.
        # ë³´ì¡° ì„œë²„ ì¶”ê°€
        IN  NS      ns2.test.srv.
        IN  MX 10   dlp.test.srv.

ns1     IN  A       192.168.219.101
ns2     IN  A       192.168.219.101
www     IN  A       192.168.219.102


$ systemctl restart named
```

<br>

<big> **â–  DNS ë³´ì¡° ì„œë²„ í˜¸ìŠ¤íŠ¸ì—ì„œ êµ¬ì„±** </big>

```bash
$ vi /etc/named.conf

zone "srv.world" IN {
        type slave;
        masters { 192.168.219.101; };
        file "slaves/test.srv.wan";
        notify no;
};

$ systemctl restart named

$ ls /var/named/slaves
srv.world.wan   # zone file transfered
```
<br>

# ğŸ”” ì „ë‹¬ì DNS Server êµ¬ì„±
---

> ì „ë‹¬ìëŠ” ë„¤ì„ ì„œë²„ê°€ ì§ì ‘ í•´ì„ì„ ìˆ˜í–‰ í•˜ì§€ ì•Šê³  ì§€ì •ëœ ë‹¤ë¥¸ ë„¤ì„ì„œë²„ì˜ ì‘ë‹µì„ ë°›ì•„ í´ë¼ì´ì–¸íŠ¸ì˜ ì§ˆì˜ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹

+ cache name server ì—­í• ì„ ìˆ˜í–‰ í•¨

+ /etc/named.confì—ì„œ í™˜ê²½ ì„¤ì •

    + forward only/first ;

    + forwarders { ì „ë‹¬í•  ëŒ€ìƒ ì„œë²„; };


> ì¡°ê±´ë¶€ ì „ë‹¬ì - íŠ¹ì • ë„ë©”ì¸ì— ëŒ€í•´ì„œë§Œ ì „ë‹¬ì ì—­í• ì„ ìˆ˜í–‰í•¨

+ /etc/named.rfc1912.zones íŒŒì¼ì—ì„œ ì„¤ì •

    ```bash
    zone "test.com" IN {
        type forward;
        forward only
        forwarders { 168.126.63.1; };
    }
    ```

+ forward

    + only : ì „ë‹¬ìì—ê²Œë§Œ ì§ˆì˜

    + first : ì „ë‹¬ìë¥¼ ìš°ì„ ìœ¼ë¡œ ì§ˆì˜

    + ì „ë‹¬ìì— ì¿¼ë¦¬ ì‹¤íŒ¨ ì‹œ root hint ì§ˆì˜

