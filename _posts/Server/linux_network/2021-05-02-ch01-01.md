---
title:  "[Linux Network] 01. ip ëª…ë ¹ì–´" 

categories:
  - LINUX_NETWORK
tags:
  - [linux_network, linux]

toc: true
toc_sticky: true

date: 2021-05-02
last_modified_at: 2021-05-02
---
<br>

# 01. ip ëª…ë ¹ì–´
---

<style>
table {
    font-size: 12pt;
}
table th:first-of-type {
    width: 5%;
}
table th:nth-of-type(2) {
    width: 15%;
}
table th:nth-of-type(3) {
    width: 50%;
}
table th:nth-of-type(4) {
    width: 30%;
}
big {
    font-size: 15pt;
}
</style>

> ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œì—ì„œ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê³  IP ì£¼ì†Œ, ë¼ìš°íŒ… í…Œì´ë¸”, ARP ìºì‹œ ë“±ì˜ ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ëª…ë ¹ì–´

<br>

## a) ëª…ë ¹ í˜•ì‹

```bash
ip [ OPTIONS ] OBJECT { COMMAND | help }
```

<br>

## b) ì˜µì…˜

| ì˜µì…˜ | ì„¤ëª… |
|:---:|:---|
|-d|ë³´ë‹¤ ì„¸ë¶€ì ì¸ ì¶œë ¥|
|-f <FAMILY>|ì‚¬ìš©í•  í”„ë¡œí† ì½œì„ ëª…ì‹œí•˜ê¸° ìœ„í•´ ì‚¬ìš©(inet, inet6, bridge, ipx ë“±)|
|-4|-family inetì˜ ì•½ì–´|
|-6|-family inet6ì˜ ì•½ì–´|
|-B|-family bridgeì˜ ì•½ì–´|
|-s|í†µê³„ ì •ë³´ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©|

<br>

## c) ì˜¤ë¸Œì íŠ¸

| ì˜µì…˜ | ì„¤ëª… |
|:---:|:---|
|address|ë””ë°”ì´ìŠ¤ì— IPv4 ë˜ëŠ” IPv6 ì£¼ì†Œ í™•ì¸, ì„¤ì •ì„ ìœ„í•´ ì‚¬ìš©|
|link|ë””ë°”ì´ìŠ¤ ë§í¬ ìƒíƒœë¥¼ í™•ì¸, ì„¤ì •ì„ ìœ„í•´ ì‚¬ìš©|
|route|ë¼ìš°íŒ… í…Œì´ë¸” ì •ë³´ë¥¼ í™•ì¸, ì„¤ì •í•˜ê¸° ìœ„í•´ ì‚¬ìš©|
|neigh|ARP ìºì‹œë¥¼ í™•ì¸, ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©|

<br>

## d) ëª…ë ¹ ì˜ˆì‹œ

<br>

### ğŸ“œ ëª¨ë“  ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì˜ ì •ë³´ë¥¼ í‘œì‹œ - ip address show (= ip addr)

```bash
$ ip addr
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: ens32: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 00:0c:29:a0:ba:90 brd ff:ff:ff:ff:ff:ff
    altname enp2s0
    inet 192.168.219.191/24 brd 192.168.219.255 scope global ens32
       valid_lft forever preferred_lft forever
    inet6 fe80::20c:29ff:fea0:ba90/64 scope link
       valid_lft forever preferred_lft forever
```

<br>

### ğŸ“œ íŠ¹ì • ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ ì •ë³´ í™•ì¸

```bash
$ ip address show dev ens32
2: ens32: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 00:0c:29:a0:ba:90 brd ff:ff:ff:ff:ff:ff
    altname enp2s0
    inet 192.168.219.191/24 brd 192.168.219.255 scope global ens32
       valid_lft forever preferred_lft forever
    inet6 fe80::20c:29ff:fea0:ba90/64 scope link
       valid_lft forever preferred_lft forever
```

<br>

### ğŸ“œ íŠ¹ì • ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ ë§í¬ ìƒíƒœ í™•ì¸ ë° ë³€ê²½

```bash
$ ip link show ens32
2: ens32: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 00:0c:29:a0:ba:90 brd ff:ff:ff:ff:ff:ff
    altname enp2s0

$ ip link set ens32 down

$ ip link show ens32
2: ens32: <BROADCAST,MULTICAST> mtu 1500 qdisc fq_codel state DOWN mode DEFAULT group default qlen 1000
    link/ether 00:0c:29:a0:ba:90 brd ff:ff:ff:ff:ff:ff
    altname enp2s0

$ ip link show ens32
2: ens32: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 00:0c:29:a0:ba:90 brd ff:ff:ff:ff:ff:ff
    altname enp2s0
```

<br>

### ğŸ“œ ì¸í„°í˜ì´ìŠ¤ì— IP ì£¼ì†Œë¥¼ í• ë‹¹ ë° ì œê±°

```bash
$ ip address add 192.168.219.100/24 dev ens32

$ ip addr show dev ens32
2: ens32: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 00:0c:29:a0:ba:90 brd ff:ff:ff:ff:ff:ff
    altname enp2s0
    inet 192.168.219.191/24 brd 192.168.219.255 scope global ens32
       valid_lft forever preferred_lft forever
    inet 192.168.219.100/24 scope global secondary ens32
       valid_lft forever preferred_lft forever
    inet6 fe80::20c:29ff:fea0:ba90/64 scope link
       valid_lft forever preferred_lft forever

$ ping -c 2 192.168.219.100
PING 192.168.219.100 (192.168.219.100) 56(84) bytes of data.
64 bytes from 192.168.219.100: icmp_seq=1 ttl=64 time=0.016 ms
64 bytes from 192.168.219.100: icmp_seq=2 ttl=64 time=0.121 ms

--- 192.168.219.100 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1018ms
rtt min/avg/max/mdev = 0.016/0.068/0.121/0.052 ms

$ ip address delete 192.168.219.100/24 dev ens32
```

<br>

### ğŸ“œ ë¼ìš°íŒ… í…Œì´ë¸” í™•ì¸ ë° í•­ëª© ì¶”ê°€/ì œê±°

```bash
$ ip route show
default via 192.168.219.2 dev ens32 proto static
10.1.2.0/24 dev ens34 proto kernel scope link src 10.1.2.100
192.168.219.0/24 dev ens32 proto kernel scope link src 192.168.219.191

$ ip route add 172.20.15.0/24 via 192.168.219.192

$ ip route show
default via 192.168.219.2 dev ens32 proto static
10.1.2.0/24 dev ens34 proto kernel scope link src 10.1.2.100
172.20.15.0/24 via 192.168.219.192 dev ens32
192.168.219.0/24 dev ens32 proto kernel scope link src 192.168.219.191

$ ping -c 3 172.20.15.1
PING 172.20.15.1 (172.20.15.1) 56(84) bytes of data.
64 bytes from 172.20.15.1: icmp_seq=1 ttl=128 time=0.485 ms
64 bytes from 172.20.15.1: icmp_seq=2 ttl=128 time=1.80 ms
64 bytes from 172.20.15.1: icmp_seq=3 ttl=128 time=1.33 ms

--- 172.20.15.1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2035ms
rtt min/avg/max/mdev = 0.485/1.204/1.797/0.542 ms

$ ip route delete 172.20.15.0/24 via 192.168.219.192

$ ip route show
default via 192.168.219.2 dev ens32 proto static
10.1.2.0/24 dev ens34 proto kernel scope link src 10.1.2.100
192.168.219.0/24 dev ens32 proto kernel scope link src 192.168.219.191
```

<br>

### ğŸ“œ ARP ìºì‹œ í™•ì¸ ë° í•­ëª© ì¶”ê°€/ì œê±°

```bash
$ ip neigh show
168.126.63.1 dev ens34  FAILED
192.168.219.2 dev ens32 lladdr 00:50:56:fd:7f:0e STALE
192.168.219.1 dev ens32 lladdr 00:50:56:c0:00:08 DELAY

$ ip neigh add 192.168.219.192 lladdr 00:50:56:2f:2a:7c dev ens32

$ ip neigh show
168.126.63.1 dev ens34  FAILED
192.168.219.2 dev ens32 lladdr 00:50:56:fd:7f:0e STALE
192.168.219.192 dev ens32 lladdr 00:50:56:2f:2a:7c STALE
192.168.219.1 dev ens32 lladdr 00:50:56:c0:00:08 DELAY

$ ip neigh del 192.168.219.192 lladdr 00:50:56:2f:2a:7c dev ens32
```