---
title:  "[Rocky] 06. FTP(vsftpd) + SSL/TLS" 

categories:
  - ROCKY
tags:
  - [rocky, linux]

toc: true
toc_sticky: true

date: 2022-08-10
last_modified_at: 2022-08-10
---
<br>

# ğŸ”” FTP(vsftpd) + SSL/TLS ì„¤ì •
---

<style>
table {
    font-size: 12pt;
}
table th:first-of-type {
    width: 5%;
}
table th:nth-of-type(2) {
    width: 15%;
}
table th:nth-of-type(3) {
    width: 50%;
}
table th:nth-of-type(4) {
    width: 30%;
}
big {
    font-size: 15pt;
}
</style>

<br>

<big> **â–  ìì²´ ì„œëª…ëœ ì¸ì¦ì„œ ìƒì„±** </big>

+ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ìì²´ ì„œëª…ëœ ì¸ì¦ì„œ ìƒì„±í•˜ëŠ” ê²ƒìœ¼ë¡œ, ìœ íš¨í•œ ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì•˜ì„ ê²½ìš° ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ë‹¤.

```bash
$ cd /etc/pki/tls/certs

$ openssl req -x509 -nodes -newkey rsa:2048 -keyout vsftpd.pem -out vsftpd.pem -days 3650

$ chmod 600 vsftpd.pem
```

<br>

<big> **â–  vsftpd ì„¤ì •** </big>

```bash
$ vi /etc/vsftpd/vsftpd.conf


rsa_cert_file=/etc/pki/tls/certs/vsftpd.pem
ssl_enable=YES
force_local_data_ssl=YES
force_local_logins_ssl=YES


$ systemctl restart vsftpd
```

<br>

<big> **â–  ë°©í™”ë²½ì´ ì‹¤í–‰ ì¤‘ì¸ ê²½ìš°, íŒ¨ì‹œë¸Œ í¬íŠ¸ë¥¼ í—ˆìš©** </big>

```bash
$ vi /etc/vsftpd/vsftpd.conf


pasv_enable=YES
pasv_min_port=60000
pasv_max_port=60100


$ systemctl restart vsftpd

$ firewall-cmd --add-port=60000-60100/tcp

$ firewall-cmd --runtime-to-permanent
```

<br>

# ğŸ”” FTP Clientì—ì„œ í™•ì¸
---

<br>

<big> **â–  FTP Client : Rocky Linux** </big>

```bash
$  vi ~/.lftprc.

set ftp:ssl-auth TLS
set ftp:ssl-force true
set ftp:ssl-protect-list yes
set ftp:ssl-protect-data yes
set ftp:ssl-protect-fxp yes
set ssl:verify-certificate no


$ lftp -u test dlp.test.srv
Password:
lftp rocky@www.srv.world:~>
```

<br>

<big> **â–  FTP Client : Windows** </big>

> FileZilla ì„¤ì¹˜ : <https://filezilla-project.org/>

![1](https://user-images.githubusercontent.com/42735894/232573941-1c51d67c-7218-413b-bd09-91ddef33a14a.png){: width="80%" height="80%"}{: .align-center}

![2](https://user-images.githubusercontent.com/42735894/232573953-4c2c49b0-82b6-4711-bf20-491c71e66cef.PNG){: width="80%" height="80%"}{: .align-center}

![3](https://user-images.githubusercontent.com/42735894/232573961-87bd8e6e-99ab-4f37-9933-37c501d049d7.PNG){: width="80%" height="80%"}{: .align-center}

![4](https://user-images.githubusercontent.com/42735894/232573974-c0e2a539-0aaf-4b96-a060-f682bda7bc08.PNG){: width="80%" height="80%"}{: .align-center}
